(()=>{var M=Object.defineProperty;var x=(a,t,e)=>t in a?M(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var w=(a,t,e)=>(x(a,typeof t!="symbol"?t+"":t,e),e);var m=class{static get(t){switch(t){case"linear":return this._easeLinear;case"easeOut":return this._easeOutSine;case"easeOutExpo":return this._easeOutExpo;case"easeOutSpring":return this._easeOutSpring;case"easeOutBack":return this._easeOutBack;default:return this._easeLinear}}static _easeLinear(t){return t}static _easeOutSine(t){return Math.sin(t*(Math.PI/2))}static _easeOutExpo(t){return 1-Math.pow(2,-10*t)}static _easeOutSpring(t){let e=1,i=.3,s=i/(Math.PI*2)*(Math.asin(1/e)||0);return e*Math.pow(2,-10*t)*Math.sin((t-s)*(Math.PI*2)/i)+1}static _easeOutBack(t){let e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1}};var l=class{constructor(t,e,i){this.target=t,this.properties=e,this.propertyDeltas=[],this.setProperties(i)}setProperties(t){switch(t){case"to":for(let e in this.properties)this.propertyDeltas[e]={start:this.target[e],delta:this.properties[e]-this.target[e]};break;case"from":for(let e in this.properties)this.propertyDeltas[e]={start:this.properties[e],delta:this.target[e]-this.properties[e]};break;default:break}}update(t){for(let e in this.properties)this.target[e]=this.propertyDeltas[e].start+t*this.propertyDeltas[e].delta}};var d=class{constructor(){this.timeScale=1e3,this.startTime=0,this.elapsedTime=0,this.progress=0,this.previousMomentDuration=0,this.totalDuration=0,this.currentAnimationFrame=null,this.paused=!1,this.rewinding=!1,this.moments=[]}play(){let t=e=>{this.elapsedTime=e-this.startTime,this.progress=Math.min(this.elapsedTime/this.totalDuration,1),this._animate(),this.progress>0&&this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.rewinding=!1,this.paused?this.startTime=performance.now()-this.totalDuration*this.progress:this.startTime=performance.now(),this.paused=!1,this.currentAnimationFrame=requestAnimationFrame(t)}pause(){cancelAnimationFrame(this.currentAnimationFrame),this.paused=!0}rewind(){let t=e=>{this.elapsedTime=Math.max(this.totalDuration-(e-this.startTime),0),this.progress=Math.min(this.elapsedTime/this.totalDuration,1),this._animate(),this.progress>0&&this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.rewinding=!0,this.paused?this.startTime=performance.now()-this.totalDuration*(1-this.progress):this.startTime=performance.now(),this.paused=!1,this.currentAnimationFrame=requestAnimationFrame(t)}to(t,e,i,s=null){let o=this._setTargets(t),r=this._setTimings(o,i,s),n=[];o.forEach(u=>{n.push(new l(u,e,"to"))}),this._add(n,r,i)}from(t,e,i,s=null){let o=this._setTargets(t),r=this._setTimings(o,i,s),n=[];o.forEach(u=>{n.push(new l(u,e,"from"))}),this._add(n,r,i)}_add(t,e,i){this.moments.length===0?this.moments.push({animations:t,timings:e,options:i}):this.moments.push({animations:t,timings:e,options:i})}_animate(){this.moments.forEach(t=>{let e=Math.max(this.elapsedTime-t.timings.delay,0),i=Math.min(e/t.timings.totalDuration,1);i>0&&i<1?(t.options.onUpdate?.(),t.animations.forEach((s,o)=>{let r=Math.min((e-t.timings.stagger*o)/t.timings.duration,1);if(r>0&&r<1){let n=t.timings.easing(r);s.update(n)}else r<=0&&this.rewinding?s.update(0):r>=1&&s.update(1)})):i<=0&&this.rewinding?this.rewinding&&t.animations.forEach(s=>{s.update(0)}):i>=1&&(t.animations.forEach(s=>{s.update(1)}),t.options.onComplete?.())})}_setTargets(t){let e=null;return Array.isArray(t)?e=t:e=[t],e}_setTimings(t,e,i){let s={};return s.duration=e.duration*this.timeScale,i!==null?s.offset=i*this.timeScale:s.offset=this.previousMomentDuration,s.delay=e.delay?e.delay*this.timeScale+s.offset:s.offset,s.stagger=e.stagger?e.stagger*this.timeScale:0,s.totalDuration=s.duration+(t.length-1)*s.stagger,s.easing=m.get(e.ease),this.previousMomentDuration=s.totalDuration+s.delay,this.totalDuration=Math.max(this.previousMomentDuration,this.totalDuration),s}};var p=class{static to(t,e,i){let s=this._setTargets(t),o=this._setTimings(s,i),r=[];s.forEach(n=>{r.push(new l(n,e,"to"))}),this._animate(r,o,i)}static from(t,e,i){let s=this._setTargets(t),o=this._setTimings(s,i),r=[];s.forEach(n=>{r.push(new l(n,e,"from"))}),this._animate(r,o,i)}static _animate(t,e,i){function s(r){let n=r-o-e.delay,u=Math.min(n/e.totalDuration,1);t.forEach((y,A)=>{let E=Math.min((n-e.stagger*A)/e.duration,1);if(E>0){let D=e.easing(E);y.update(D)}}),u<1?(i.onUpdate?.(),requestAnimationFrame(s)):i.onComplete?.()}i.onStart?.();let o=performance.now();requestAnimationFrame(s)}static _setTargets(t){let e=null;return Array.isArray(t)?e=t:e=[t],e}static _setTimings(t,e){let i=1e3,s={};return s.duration=e.duration*i,s.delay=e.delay?e.delay*i:0,s.stagger=e.stagger?e.stagger*i:0,s.totalDuration=s.duration+(t.length-1)*s.stagger,s.easing=m.get(e.ease),s}};w(p,"scene",d);var h=document.getElementById("canvas"),_=devicePixelRatio;h.width=h.clientWidth*_;h.height=h.clientHeight*_;var S=document.getElementById("webgl"),U=S.getContext("webgl",{powerPreference:"high-performance"}),g=h.getContext("2d"),f=[],F=["#FFE7E5","#FFBDAF","#E65F5C","#E8FFEE","#36EFB1","#32D789","#E8F4FF","#6EE4FF","#41C0EC","#72FFF9","#67E6E0","#387D7A"];for(let a=0;a<3;a++)for(let t=0;t<3;t++)f.push({fill:F[Math.floor(Math.random()*F.length)],x:h.width/4*(t+1),y:h.height/4*(a+1),scale:0});var O=()=>{f.forEach(a=>{g.fillStyle=a.fill,g.beginPath(),g.arc(a.x,a.y,a.scale,0,Math.PI*2),g.fill()})},T=()=>{g.clearRect(0,0,h.width,h.height),O(),requestAnimationFrame(T)};requestAnimationFrame(T);var c;setTimeout(()=>{c=new p.scene,c.to(f,{scale:32},{duration:1,ease:"easeOutExpo",stagger:.05,onComplete:()=>{console.log("done")}}),c.play()},500);window.addEventListener("click",a=>{c.paused?c.rewinding?c.play():c.rewind():c.pause()});})();
