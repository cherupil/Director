(()=>{var M=Object.defineProperty;var O=(i,e,t)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var _=(i,e,t)=>(O(i,typeof e!="symbol"?e+"":e,t),t);var m=class{static get(e){switch(e){case"linear":return this._easeLinear;case"easeOut":return this._easeOutSine;case"easeOutExpo":return this._easeOutExpo;case"easeOutSpring":return this._easeOutSpring;case"easeOutBack":return this._easeOutBack;default:return this._easeLinear}}static _easeLinear(e){return e}static _easeOutSine(e){return Math.sin(e*(Math.PI/2))}static _easeOutExpo(e){return 1-Math.pow(2,-10*e)}static _easeOutSpring(e){let t=1,a=.3,s=a/(Math.PI*2)*(Math.asin(1/t)||0);return t*Math.pow(2,-10*e)*Math.sin((e-s)*(Math.PI*2)/a)+1}static _easeOutBack(e){let t=1.70158;return(e=e-1)*e*((t+1)*e+t)+1}};var l=class{constructor(e,t,a){this.target=e,this.properties=t,this.propertyDeltas=[],this.setProperties(a)}setProperties(e){switch(e){case"to":for(let t in this.properties)this.propertyDeltas[t]={start:this.target[t],delta:this.properties[t]-this.target[t]};break;case"from":for(let t in this.properties)this.propertyDeltas[t]={start:this.properties[t],delta:this.target[t]-this.properties[t]};break;default:break}}update(e){for(let t in this.properties)this.target[t]=this.propertyDeltas[t].start+e*this.propertyDeltas[t].delta}};var f=class{constructor(){this.timeScale=1e3,this.startTime=0,this.elapsedTime=0,this.progress=0,this.previousMomentDuration=0,this.totalDuration=0,this.currentAnimationFrame=null,this.paused=!1,this.rewinding=!1,this.moments=[]}play(){let e=t=>{this.elapsedTime=t-this.startTime,this.progress=Math.min(this.elapsedTime/this.totalDuration,1),this._animate(),this.progress>0&&this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(e))};this.rewinding=!1,this.paused?this.startTime=performance.now()-this.totalDuration*this.progress:this.startTime=performance.now(),this.paused=!1,this.currentAnimationFrame=requestAnimationFrame(e)}pause(){cancelAnimationFrame(this.currentAnimationFrame),this.paused=!0}rewind(){let e=t=>{this.elapsedTime=Math.max(this.totalDuration-(t-this.startTime),0),this.progress=Math.min(this.elapsedTime/this.totalDuration,1),this._animate(),this.progress>0&&this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(e))};this.rewinding=!0,this.paused?this.startTime=performance.now()-this.totalDuration*(1-this.progress):this.startTime=performance.now(),this.paused=!1,this.currentAnimationFrame=requestAnimationFrame(e)}to(e,t,a,s=null){let o=this._setTargets(e),r=this._setTimings(o,a,s),n=[];o.forEach(u=>{n.push(new l(u,t,"to"))}),this._add(n,r,a)}from(e,t,a,s=null){let o=this._setTargets(e),r=this._setTimings(o,a,s),n=[];o.forEach(u=>{n.push(new l(u,t,"from"))}),this._add(n,r,a)}_add(e,t,a){this.moments.length===0?this.moments.push({animations:e,timings:t,options:a}):this.moments.push({animations:e,timings:t,options:a})}_animate(){this.moments.forEach(e=>{let t=Math.max(this.elapsedTime-e.timings.delay,0),a=Math.min(t/e.timings.totalDuration,1);a>0&&a<1?(e.options.onUpdate?.(),e.animations.forEach((s,o)=>{let r=Math.min((t-e.timings.stagger*o)/e.timings.duration,1);if(r>0){let n=e.timings.easing(r);s.update(n)}})):a<=0&&this.rewinding?this.rewinding&&e.animations.forEach(s=>{s.update(0)}):a>=1&&e.animations.forEach(s=>{s.update(1)})})}_setTargets(e){let t=null;return Array.isArray(e)?t=e:t=[e],t}_setTimings(e,t,a){let s={};return s.duration=t.duration*this.timeScale,a!==null?s.offset=a*this.timeScale:s.offset=this.previousMomentDuration,s.delay=t.delay?t.delay*this.timeScale+s.offset:s.offset,s.stagger=t.stagger?t.stagger*this.timeScale:0,s.totalDuration=s.duration+(e.length-1)*s.stagger,s.easing=m.get(t.ease),this.previousMomentDuration=s.totalDuration+s.delay,this.totalDuration=Math.max(this.previousMomentDuration,this.totalDuration),s}};var p=class{static to(e,t,a){let s=this._setTargets(e),o=this._setTimings(s,a),r=[];s.forEach(n=>{r.push(new l(n,t,"to"))}),this._animate(r,o,a)}static from(e,t,a){let s=this._setTargets(e),o=this._setTimings(s,a),r=[];s.forEach(n=>{r.push(new l(n,t,"from"))}),this._animate(r,o,a)}static _animate(e,t,a){function s(r){let n=r-o-t.delay,u=Math.min(n/t.totalDuration,1);e.forEach((A,D)=>{let w=Math.min((n-t.stagger*D)/t.duration,1);if(w>0){let x=t.easing(w);A.update(x)}}),u<1?(a.onUpdate?.(),requestAnimationFrame(s)):a.onComplete?.()}a.onStart?.();let o=performance.now();requestAnimationFrame(s)}static _setTargets(e){let t=null;return Array.isArray(e)?t=e:t=[e],t}static _setTimings(e,t){let a=1e3,s={};return s.duration=t.duration*a,s.delay=t.delay?t.delay*a:0,s.stagger=t.stagger?t.stagger*a:0,s.totalDuration=s.duration+(e.length-1)*s.stagger,s.easing=m.get(t.ease),s}};_(p,"scene",f);var h=document.getElementById("canvas"),F=devicePixelRatio;h.width=h.clientWidth*F;h.height=h.clientHeight*F;var S=document.getElementById("webgl"),H=S.getContext("webgl",{powerPreference:"high-performance"}),g=h.getContext("2d"),d=[],T=["#FFE7E5","#FFBDAF","#E65F5C","#E8FFEE","#36EFB1","#32D789","#E8F4FF","#6EE4FF","#41C0EC","#72FFF9","#67E6E0","#387D7A"];for(var E=0;E<3;E++)d.push({fill:T[Math.floor(Math.random()*T.length)],x:h.width/3,y:h.height/4*(E+1),scale:32});var P=()=>{d.forEach(i=>{g.fillStyle=i.fill,g.beginPath(),g.arc(i.x,i.y,i.scale,0,Math.PI*2),g.fill()})},y=()=>{g.clearRect(0,0,h.width,h.height),P(),requestAnimationFrame(y)};requestAnimationFrame(y);var c;setTimeout(()=>{c=new p.scene,c.to(d[0],{x:h.width/3*2,scale:0},{duration:2,ease:"easeOutExpo",onComplete:()=>{console.log("1st complete")}}),c.from(d[1],{x:h.width/3*2,scale:0},{duration:4,ease:"easeOutExpo",onComplete:()=>{console.log("2nd complete")}},.25),c.to(d[2],{x:h.width/3*2,scale:0},{duration:2,ease:"easeOutExpo"}),c.play()},500);window.addEventListener("click",i=>{c.paused?c.rewinding?c.play():c.rewind():c.pause()});})();
