(()=>{var P=Object.defineProperty;var q=(r,t,e)=>t in r?P(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var w=(r,t,e)=>(q(r,typeof t!="symbol"?t+"":t,e),e);var u=class{static get(t){switch(t){case"linear":return this._easeLinear;case"easeOut":return this._easeOutSine;case"easeOutExpo":return this._easeOutExpo;case"easeOutSpring":return this._easeOutSpring;case"easeOutBack":return this._easeOutBack;default:return this._easeLinear}}static _easeLinear(t){return t}static _easeOutSine(t){return Math.sin(t*(Math.PI/2))}static _easeOutExpo(t){return 1-Math.pow(2,-10*t)}static _easeOutSpring(t){let e=1,s=.3,i=s/(Math.PI*2)*(Math.asin(1/e)||0);return e*Math.pow(2,-10*t)*Math.sin((t-i)*(Math.PI*2)/s)+1}static _easeOutBack(t){let e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1}};var c=class{constructor(t,e,s){this.target=t,this.properties=e,this.direction=s,this.propertyDeltas=[],this.setProperties()}setProperties(){switch(this.direction){case"to":for(let t in this.properties)this.propertyDeltas[t]={start:this.target[t],delta:this.properties[t]-this.target[t]};break;case"from":for(let t in this.properties)this.propertyDeltas[t]={start:this.properties[t],delta:this.target[t]-this.properties[t]};break;default:break}}update(t){for(let e in this.properties)this.target[e]=this.propertyDeltas[e].start+t*this.propertyDeltas[e].delta}};var g=class{constructor(){this.timeScale=1e3,this.duration=0,this.startTime=0,this.currentTime=0,this.progress=0,this.paused=!1,this.rewinding=!1,this.currentAnimationFrame=null,this.previousVoiceDuration=0,this.voices=[]}play(){this.rewinding=!1,this.paused?this.startTime=performance.now()-this.duration*this.progress:this.startTime=performance.now(),this.paused=!1;let t=e=>{let s=e-this.startTime;this.progress=Math.min(s/this.duration,1),this._animate(),this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.currentAnimationFrame=requestAnimationFrame(t)}pause(){this.paused=!0,cancelAnimationFrame(this.currentAnimationFrame)}rewind(){this.rewinding=!0,this.paused?this.startTime=performance.now()-this.duration*(1-this.progress):this.startTime=performance.now(),this.paused=!1;let t=e=>{let s=this.duration-(e-this.startTime);this.progress=Math.min(s/this.duration,1),this._animate(),this.progress>0&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.currentAnimationFrame=requestAnimationFrame(t)}setProgress(t){this.progress=t;let e=s=>{let i=this.duration*this.progress;this._animate()};this.currentAnimationFrame=requestAnimationFrame(e)}_animate(){this.currentTime=this.duration*this.progress,this.voices.forEach((t,e)=>{t.progress=(this.currentTime-t.timings.start)/t.timings.totalDuration,t.started&&!t.completed&&t.motifs.forEach((s,i)=>{let o=Math.max(this.currentTime-t.timings.start-t.timings.stagger*i,0),a=Math.min(o/t.timings.duration,1),n=t.timings.easing(a);s.update(n)}),t.progress>0?(t.started||e!==0&&t.motifs.forEach(s=>{s.setProperties()}),t.started=!0):(t.started&&t.direction==="from"?e!==0?t.motifs.forEach(s=>{s.update(1)}):t.motifs.forEach(s=>{s.update(0)}):!t.started&&!t.initialized&&t.direction==="from"&&(t.motifs.forEach(s=>{s.update(0)}),t.initialized=!0),t.started=!1),t.progress>=1?(t.completed||t.motifs.forEach(s=>{s.update(1)}),t.completed=!0):t.completed=!1})}to(t,e,s,i=null){let o=this._setTargets(t),a=this._setTimings(o,s,i),n=[];o.forEach(m=>{n.push(new c(m,e,"to"))}),this._add(n,a,s,"to")}from(t,e,s,i=null){let o=this._setTargets(t),a=this._setTimings(o,s,i),n=[];o.forEach(m=>{n.push(new c(m,e,"from"))}),this._add(n,a,s,"from")}_add(t,e,s,i){this.voices.push({motifs:t,timings:e,options:s,direction:i,progress:0,initialized:!1,started:!1,completed:!1}),this.setProgress(0)}_setTargets(t){let e=null;return Array.isArray(t)?e=t:e=[t],e}_setTimings(t,e,s){let i={},o=e.duration*this.timeScale,a=0;s!==null?a=s*this.timeScale:a=this.previousVoiceDuration,i.stagger=e.stagger?e.stagger*this.timeScale:0;let n=e.delay?e.delay*this.timeScale+a:a,m=o+(t.length-1)*i.stagger;return i.start=n,i.end=n+m,i.duration=o,i.totalDuration=m,i.easing=u.get(e.ease),this.previousVoiceDuration=i.end,this.duration=Math.max(this.previousVoiceDuration,this.duration),i}};var l=class{static to(t,e,s){let i=this._setTargets(t),o=this._setTimings(i,s),a=[];i.forEach(n=>{a.push(new c(n,e,"to"))}),this._animate(a,o,s)}static from(t,e,s){let i=this._setTargets(t),o=this._setTimings(i,s),a=[];i.forEach(n=>{a.push(new c(n,e,"from"))}),this._animate(a,o,s)}static _animate(t,e,s){function i(a){let n=a-o-e.delay,m=Math.min(n/e.totalDuration,1);t.forEach((D,x)=>{let T=Math.min((n-e.stagger*x)/e.duration,1);if(T>0){let O=e.easing(T);D.update(O)}}),m<1?(s.onUpdate?.(),requestAnimationFrame(i)):s.onComplete?.()}s.onStart?.();let o=performance.now();requestAnimationFrame(i)}static _setTargets(t){let e=null;return Array.isArray(t)?e=t:e=[t],e}static _setTimings(t,e){let s=1e3,i={};return i.duration=e.duration*s,i.delay=e.delay?e.delay*s:0,i.stagger=e.stagger?e.stagger*s:0,i.totalDuration=i.duration+(t.length-1)*i.stagger,i.easing=u.get(e.ease),i}};w(l,"composition",g);var h=document.getElementById("canvas"),y=devicePixelRatio;h.width=h.clientWidth*y;h.height=h.clientHeight*y;var z=document.getElementById("webgl"),N=z.getContext("webgl",{powerPreference:"high-performance"}),d=h.getContext("2d"),E=["#FFE7E5","#FFBDAF","#E65F5C","#E8FFEE","#36EFB1","#32D789","#E8F4FF","#6EE4FF","#41C0EC","#72FFF9","#67E6E0","#387D7A"];d.strokeStyle=E[Math.floor(Math.random()*E.length)];var p=40,F=32,C=Math.floor(h.height/p),j=Math.floor(h.width/p),_=[];d.fillStyle=E[5];for(let r=0;r<C;r++)for(let t=0;t<j;t++)_.push({x:p*t,y:p*r,size:F});var A=0,k=()=>{_.forEach(r=>{d.fillRect(r.x+(F-r.size/2),r.y+(F-r.size/2),r.size,r.size)})},M=()=>{d.clearRect(0,0,h.width,h.height),k(),requestAnimationFrame(M),f.setProgress(A)};requestAnimationFrame(M);var f=new l.composition;f.from(_,{size:0},{duration:1.6,ease:"easeOutSine",stagger:.001});var S=1,B=document.querySelector("aside");B.style.height=`${S*f.duration+window.innerHeight}px`;var b=S*f.duration;window.addEventListener("scroll",r=>{let t=r.target.scrollingElement.scrollTop;A=Math.min(Math.max(t/b,0),1)});})();
