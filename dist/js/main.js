(()=>{var B=Object.defineProperty;var C=(n,t,e)=>t in n?B(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var A=(n,t,e)=>(C(n,typeof t!="symbol"?t+"":t,e),e);var g=class{static get(t){switch(t){case"linear":return this._easeLinear;case"easeOut":return this._easeOutSine;case"easeOutExpo":return this._easeOutExpo;case"easeOutSpring":return this._easeOutSpring;case"easeOutBack":return this._easeOutBack;default:return this._easeLinear}}static _easeLinear(t){return t}static _easeOutSine(t){return Math.sin(t*(Math.PI/2))}static _easeOutExpo(t){return 1-Math.pow(2,-10*t)}static _easeOutSpring(t){let e=1,r=.3,a=r/(Math.PI*2)*(Math.asin(1/e)||0);return e*Math.pow(2,-10*t)*Math.sin((t-a)*(Math.PI*2)/r)+1}static _easeOutBack(t){let e=1.70158;return(t=t-1)*t*((e+1)*t+e)+1}};var d=class{constructor(t,e,r){this.target=t,this.properties=e,this.propertyDeltas=[],this.setProperties(r)}setProperties(t){switch(t){case"to":for(let e in this.properties)this.propertyDeltas[e]={start:this.target[e],delta:this.properties[e]-this.target[e]};break;case"from":for(let e in this.properties)this.propertyDeltas[e]={start:this.properties[e],delta:this.target[e]-this.properties[e]};break;default:break}}update(t){for(let e in this.properties)this.target[e]=this.propertyDeltas[e].start+t*this.propertyDeltas[e].delta}};var f=class{constructor(){this.timeScale=1e3,this.startTime=0,this.elapsedTime=0,this.progress=0,this.previousMomentDuration=0,this.totalDuration=0,this.currentAnimationFrame=null,this.paused=!1,this.rewinding=!1,this.moments=[]}play(){let t=e=>{this.elapsedTime=e-this.startTime,this.progress=Math.min(this.elapsedTime/this.totalDuration,1),this._animate(),this.progress>0&&this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.rewinding=!1,this.paused?this.startTime=performance.now()-this.totalDuration*this.progress:this.startTime=performance.now(),this.paused=!1,this.currentAnimationFrame=requestAnimationFrame(t)}pause(){cancelAnimationFrame(this.currentAnimationFrame),this.paused=!0}rewind(){let t=e=>{this.elapsedTime=Math.max(this.totalDuration-(e-this.startTime),0),this.progress=Math.min(this.elapsedTime/this.totalDuration,1),this._animate(),this.progress>0&&this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.rewinding=!0,this.paused?this.startTime=performance.now()-this.totalDuration*(1-this.progress):this.startTime=performance.now(),this.paused=!1,this.currentAnimationFrame=requestAnimationFrame(t)}to(t,e,r,a=null){let c=this._setTargets(t),h=this._setTimings(c,r,a),l=[];c.forEach(m=>{l.push(new d(m,e,"to"))}),this._add(l,h,r)}from(t,e,r,a=null){let c=this._setTargets(t),h=this._setTimings(c,r,a),l=[];c.forEach(m=>{l.push(new d(m,e,"from"))}),this._add(l,h,r)}_add(t,e,r){this.moments.length===0?this.moments.push({animations:t,timings:e,options:r,complete:!1}):this.moments.push({animations:t,timings:e,options:r,complete:!1})}_animate(){this.moments.forEach(t=>{let e=Math.max(this.elapsedTime-t.timings.delay,0),r=Math.min(e/t.timings.totalDuration,1);r>0&&r<1?(t.complete=!1,t.options.onUpdate?.(),t.animations.forEach((a,c)=>{let h=Math.min((e-t.timings.stagger*c)/t.timings.duration,1);if(h>0&&h<1){let l=t.timings.easing(h);a.update(l)}else h<=0&&this.rewinding?a.update(0):h>=1&&a.update(1)})):r<=0&&this.rewinding?this.rewinding&&t.animations.forEach(a=>{a.update(0)}):r>=1&&(t.complete||(t.animations.forEach(a=>{a.update(1)}),t.options.onComplete?.(),t.complete=!0))})}_setTargets(t){let e=null;return Array.isArray(t)?e=t:e=[t],e}_setTimings(t,e,r){let a={};return a.duration=e.duration*this.timeScale,r!==null?a.offset=r*this.timeScale:a.offset=this.previousMomentDuration,a.delay=e.delay?e.delay*this.timeScale+a.offset:a.offset,a.stagger=e.stagger?e.stagger*this.timeScale:0,a.totalDuration=a.duration+(t.length-1)*a.stagger,a.easing=g.get(e.ease),this.previousMomentDuration=a.totalDuration+a.delay,this.totalDuration=Math.max(this.previousMomentDuration,this.totalDuration),a}};var p=class{static to(t,e,r){let a=this._setTargets(t),c=this._setTimings(a,r),h=[];a.forEach(l=>{h.push(new d(l,e,"to"))}),this._animate(h,c,r)}static from(t,e,r){let a=this._setTargets(t),c=this._setTimings(a,r),h=[];a.forEach(l=>{h.push(new d(l,e,"from"))}),this._animate(h,c,r)}static _animate(t,e,r){function a(h){let l=h-c-e.delay,m=Math.min(l/e.totalDuration,1);t.forEach((k,b)=>{let P=Math.min((l-e.stagger*b)/e.duration,1);if(P>0){let v=e.easing(P);k.update(v)}}),m<1?(r.onUpdate?.(),requestAnimationFrame(a)):r.onComplete?.()}r.onStart?.();let c=performance.now();requestAnimationFrame(a)}static _setTargets(t){let e=null;return Array.isArray(t)?e=t:e=[t],e}static _setTimings(t,e){let r=1e3,a={};return a.duration=e.duration*r,a.delay=e.delay?e.delay*r:0,a.stagger=e.stagger?e.stagger*r:0,a.totalDuration=a.duration+(t.length-1)*a.stagger,a.easing=g.get(e.ease),a}};A(p,"scene",f);var i=document.getElementById("canvas"),D=devicePixelRatio;i.width=i.clientWidth*D;i.height=i.clientHeight*D;var I=document.getElementById("webgl"),V=I.getContext("webgl",{powerPreference:"high-performance"}),s=i.getContext("2d"),u=["#FFE7E5","#FFBDAF","#E65F5C","#E8FFEE","#36EFB1","#32D789","#E8F4FF","#6EE4FF","#41C0EC","#72FFF9","#67E6E0","#387D7A"];s.strokeStyle=u[Math.floor(Math.random()*u.length)];var y=[];for(let n=0;n<3;n++)for(let t=0;t<3;t++)y.push({fill:u[Math.floor(Math.random()*u.length)],x:i.width/4*(t+1),y:i.height/4*(n+1),scale:0});var q=u[Math.floor(Math.random()*u.length)],_={angle:-Math.PI/2,scale:i.width/4},j=u[Math.floor(Math.random()*u.length)],w={start:i.width/5*3,end:i.width/5*3},E={start:i.width/5*2,end:i.width/5*2},T={start:i.height/5*2,end:i.height/5*2},M={start:i.height/5*3,end:i.height/5*3},L=u[Math.floor(Math.random()*u.length)],F={start:0,end:0},x={start:0,end:0},O={angle:-Math.PI/4},R=()=>{s.strokeStyle=q,s.lineWidth=1,s.beginPath(),s.arc(i.width/2,i.height/2,_.scale,-Math.PI/2,_.angle),s.stroke(),s.translate(i.width/2,i.height/2),s.rotate(O.angle),s.strokeStyle=L,s.lineWidth=2,s.beginPath(),s.moveTo(F.start,0),s.lineTo(F.end,0),s.closePath(),s.stroke(),s.beginPath(),s.moveTo(0,x.start),s.lineTo(0,x.end),s.closePath(),s.stroke(),s.resetTransform(),y.forEach(n=>{s.fillStyle=n.fill,s.beginPath(),s.arc(n.x,n.y,n.scale,0,Math.PI*2),s.closePath(),s.fill()}),s.strokeStyle=j,s.lineWidth=4,s.beginPath(),s.moveTo(w.start,i.height/9),s.lineTo(w.end,i.height/9),s.closePath(),s.stroke(),s.beginPath(),s.moveTo(E.start,i.height/9*8),s.lineTo(E.end,i.height/9*8),s.closePath(),s.stroke(),s.beginPath(),s.moveTo(i.width/9,T.start),s.lineTo(i.width/9,T.end),s.closePath(),s.stroke(),s.beginPath(),s.moveTo(i.width/9*8,M.start),s.lineTo(i.width/9*8,M.end),s.closePath(),s.stroke()},S=()=>{s.clearRect(0,0,i.width,i.height),R(),requestAnimationFrame(S)};requestAnimationFrame(S);var o;setTimeout(()=>{o=new p.scene,o.to(y,{scale:32},{duration:1.6,ease:"easeOutExpo",stagger:.05,onComplete:()=>{console.log("done")}}),o.to(_,{angle:Math.PI*1.5},{duration:1.6,ease:"easeOutExpo"},.4),o.to(w,{end:i.width/5*2},{duration:.8,ease:"easeOutExpo"},1.2),o.to(w,{start:i.width/5*2},{duration:.8,ease:"easeOutExpo"},1),o.to(E,{end:i.width/5*3},{duration:.8,ease:"easeOutExpo"},1.2),o.to(E,{start:i.width/5*3},{duration:.8,ease:"easeOutExpo"},1),o.to(T,{end:i.height/5*3},{duration:.8,ease:"easeOutExpo"},1.2),o.to(T,{start:i.height/5*3},{duration:.8,ease:"easeOutExpo"},1),o.to(M,{end:i.height/5*2},{duration:.8,ease:"easeOutExpo"},1.2),o.to(M,{start:i.height/5*2},{duration:.8,ease:"easeOutExpo"},1),o.to(O,{angle:Math.PI*1.75},{duration:1.6,ease:"easeOutExpo"},1.2),o.to(F,{start:-96,end:96},{duration:1.6,ease:"easeOutExpo"},1.2),o.to(x,{start:-96,end:96},{duration:1.6,ease:"easeOutExpo"},1.2),o.play()},800);window.addEventListener("click",n=>{o.paused?o.rewinding?o.play():o.rewind():o.pause()});})();
