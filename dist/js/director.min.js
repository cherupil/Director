var y=Object.defineProperty;var D=m=>y(m,"__esModule",{value:!0});var b=(m,t)=>{D(m);for(var s in t)y(m,s,{get:t[s],enumerable:!0})};b(exports,{default:()=>w});var p=class{static get(t){switch(t){case"linear":return this._easeLinear;case"easeInSine":return this._easeInSine;case"easeOutSine":return this._easeOutSine;case"easeInOutSine":return this._easeInOutSine;case"easeInQuad":return this._easeInQuad;case"easeOutQuad":return this._easeOutQuad;case"easeInOutQuad":return this._easeInOutQuad;case"easeInCubic":return this._easeInCubic;case"easeOutCubic":return this._easeOutCubic;case"easeInOutCubic":return this._easeInOutCubic;case"easeInQuart":return this._easeInQuartic;case"easeOutQuart":return this._easeOutQuartic;case"easeInOutQuart":return this._easeInOutQuartic;case"easeInQuint":return this._easeInQuintic;case"easeOutQuint":return this._easeOutQuintic;case"easeInOutQuint":return this._easeInOutQuintic;case"easeInExpo":return this._easeInExpo;case"easeOutExpo":return this._easeOutExpo;case"easeInOutExpo":return this._easeInOutExpo;case"easeOutSpring":return this._easeOutSpring;case"easeOutBack":return this._easeOutBack;default:return this._easeLinear}}static _easeLinear(t){return t}static _easeInSine(t){return-Math.cos(t*(Math.PI/2))+1}static _easeOutSine(t){return Math.sin(t*(Math.PI/2))}static _easeInOutSine(t){return-.5*(Math.cos(Math.PI*t)-1)}static _easeInQuad(t){return t**2}static _easeOutQuad(t){return 1-(1-t)**2}static _easeInOutQuad(t){return t<.5?(t*2)**2/2:1-((1-t)*2)**2/2}static _easeInCubic(t){return t**3}static _easeOutCubic(t){return 1-(1-t)**3}static _easeInOutCubic(t){return t<.5?(t*2)**3/2:1-((1-t)*2)**3/2}static _easeInQuartic(t){return t**4}static _easeOutQuartic(t){return 1-(1-t)**4}static _easeInOutQuartic(t){return t<.5?(t*2)**4/2:1-((1-t)*2)**4/2}static _easeInQuintic(t){return t**5}static _easeOutQuintic(t){return 1-(1-t)**5}static _easeInOutQuintic(t){return t<.5?(t*2)**5/2:1-((1-t)*2)**5/2}static _easeInExpo(t){return Math.pow(2,10*(t-1))-.001}static _easeOutExpo(t){return 1-Math.pow(2,-10*t)}static _easeInOutExpo(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}static _easeOutSpring(t){let s=1,e=.3,i=e/(Math.PI*2)*(Math.asin(1/s)||0);return s*Math.pow(2,-10*t)*Math.sin((t-i)*(Math.PI*2)/e)+1}static _easeOutBack(t){let s=1.70158;return(t=t-1)*t*((s+1)*t+s)+1}};var f=class{static multiply2DMatricies(t,s){let e=t[0*3+0],i=t[0*3+1],n=t[0*3+2],r=t[1*3+0],a=t[1*3+1],o=t[1*3+2],h=t[2*3+0],l=t[2*3+1],d=t[2*3+2],g=s[0*3+0],T=s[0*3+1],E=s[0*3+2],O=s[1*3+0],I=s[1*3+1],S=s[1*3+2],x=s[2*3+0],L=s[2*3+1],C=s[2*3+2];return[g*e+T*r+E*h,g*i+T*a+E*l,g*n+T*o+E*d,O*e+I*r+S*h,O*i+I*a+S*l,O*n+I*o+S*d,x*e+L*r+C*h,x*i+L*a+C*l,x*n+L*o+C*d]}static translate2D(t,s){return[1,0,t,0,1,s,0,0,1]}static scale2D(t,s){return[t,0,0,0,s,0,0,0,1]}static rotate2D(t){return[Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1]}};var c=class{constructor(t,s,e,i,n,r){this.target=t,this.property=s,this.targetValue=e,this.currentValue=i,this.units=n,this.direction=r,this.propertyDelta={},this.setProperties()}setProperties(){switch(this.direction){case"to":this.propertyDelta={start:this.currentValue,delta:this.targetValue-this.currentValue};break;case"from":this.propertyDelta={start:this.targetValue,delta:this.currentValue-this.targetValue};break;case"fromTo":this.propertyDelta={start:this.currentValue,delta:this.targetValue-this.currentValue};break;case"addClass":this.classFunction=()=>{this.target.classList.add(this.targetValue)};break;case"removeClass":this.classFunction=()=>{this.target.classList.remove(this.targetValue)};break;default:break}}update(t){this.property!=="class"?this.target[this.property]=this.propertyDelta.start+t*this.propertyDelta.delta+this.units:(t===0&&(this.direction==="addClass"?this.target.classList.remove(this.targetValue):this.target.classList.add(this.targetValue)),t===1&&this.classFunction())}};var u=class{constructor(t,s,e,i){this.target=t,this.properties=s,this.direction=e,this.isDOM=i,this.unitExpression=/[a-z]+|%/,this.hasTransform=!1,this.transformPropertyKeys=["translateX","translateY","rotate","scale","scaleX","scaleY"],this.transformMatrix={},this.isDOM&&(this.bounds=this.target.getBoundingClientRect()),this.setProperties()}_getTransformMatrix(t){if(t==="none"||t===void 0)return{translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0};this.transformType=t.includes("3d")?"3d":"2d";let s=t.match(/matrix.*\((.+)\)/)[1].split(", ");if(this.transformType==="2d")return{translateX:s[4],translateY:s[5],scaleX:s[0],scaleY:s[3],rotate:Math.atan2(s[1],s[0])*(180/Math.PI)}}_getTransformPercentage(t,s){return t==="translateX"?s*=this.bounds.width/100:s*=this.bounds.height/100}setProperties(){if(this.actions=[],this.isDOM){let t=getComputedStyle(this.target);this.transformMatrix=this._getTransformMatrix(t.transform);for(let s in this.properties)if(this.transformPropertyKeys.includes(s))if(this.hasTransform=!0,s==="scale")this.direction==="fromTo"?(this.actions.push(new c(this.transformMatrix,"scaleX",this.properties.scale[1],this.properties.scale[0],null,this.direction)),this.actions.push(new c(this.transformMatrix,"scaleY",this.properties.scale[1],this.properties.scale[0],null,this.direction))):(this.actions.push(new c(this.transformMatrix,"scaleX",this.properties.scale,parseFloat(this.transformMatrix.scaleX),null,this.direction)),this.actions.push(new c(this.transformMatrix,"scaleY",this.properties.scale,parseFloat(this.transformMatrix.scaleY),null,this.direction)));else if((s==="translateX"||s==="translateY")&&this.isDOM)if(this.direction==="fromTo"){let e=this._getTransformPercentage(s,this.properties[s][1]),i=this._getTransformPercentage(s,this.properties[s][0]);this.actions.push(new c(this.transformMatrix,s,e,i,null,this.direction))}else{let e=this._getTransformPercentage(s,this.properties[s]);this.actions.push(new c(this.transformMatrix,s,e,parseFloat(this.transformMatrix[s]),null,this.direction))}else this.direction==="fromTo"?this.actions.push(new c(this.transformMatrix,s,this.properties[s][1],this.properties[s][0],null,this.direction)):this.actions.push(new c(this.transformMatrix,s,this.properties[s],parseFloat(this.transformMatrix[s]),null,this.direction));else if(s!=="class")if(this.direction==="fromTo")this.actions.push(new c(this.target.style,s,this.properties[s][1],this.properties[s][0],null,this.direction));else{let e=this.unitExpression.exec(t[s]),i=parseFloat(t[s].split(e)[0]);this.actions.push(new c(this.target.style,s,this.properties[s],i,e,this.direction))}else this.actions.push(new c(this.target,s,this.properties[s],null,null,this.direction))}else for(let t in this.properties)this.direction==="fromTo"?this.actions.push(new c(this.target,t,this.properties[t][1],this.properties[t][0],null,this.direction)):this.actions.push(new c(this.target,t,this.properties[t],this.target[t],null,this.direction));for(let t of this.actions)t.setProperties()}update(t){for(let s of this.actions)s.update(t);if(this.hasTransform){let s=f.multiply2DMatricies(f.multiply2DMatricies(f.scale2D(this.transformMatrix.scaleX,this.transformMatrix.scaleY),f.rotate2D(this.transformMatrix.rotate*(Math.PI/180))),f.translate2D(this.transformMatrix.translateX,this.transformMatrix.translateY));this.target.style.transform=`matrix(${s[0]}, ${s[3]}, ${s[1]}, ${s[4]}, ${s[2]}, ${s[5]})`}}};var _=class{constructor(){this.timeScale=1e3,this.duration=0,this.startTime=0,this.currentTime=0,this.progress=0,this.started=!1,this.paused=!1,this.rewinding=!1,this.currentAnimationFrame=null,this.previousActionDuration=0,this.actions=[]}play(){this.rewinding=!1,this.started||(this.onStartCallback&&this.onStartCallback(),this.started=!0),this.paused?this.startTime=performance.now()-this.duration*this.progress:this.startTime=performance.now(),this.paused=!1;let t=s=>{let e=s-this.startTime;this.progress=Math.min(e/this.duration,1),this._animate(),this.progress<1&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.currentAnimationFrame=requestAnimationFrame(t)}pause(){this.paused=!0,cancelAnimationFrame(this.currentAnimationFrame)}rewind(){this.rewinding=!0,this.paused?this.startTime=performance.now()-this.duration*(1-this.progress):this.startTime=performance.now(),this.paused=!1;let t=s=>{let e=this.duration-(s-this.startTime);this.progress=Math.min(e/this.duration,1),this._animate(),this.progress>0&&(this.currentAnimationFrame=requestAnimationFrame(t))};this.currentAnimationFrame=requestAnimationFrame(t)}setProgress(t){this.progress=t,!this.started&&this.progress>0&&(this.onStartCallback&&this.onStartCallback(),this.started=!0);let s=e=>{let i=this.duration*this.progress;this._animate()};this.currentAnimationFrame=requestAnimationFrame(s)}setProgressImmediately(t){this.progress=t,!this.started&&this.progress>0&&(this.onStartCallback&&this.onStartCallback(),this.started=!0),this._animate()}_animate(){this.currentTime=this.duration*this.progress,this.actions.forEach((t,s)=>{t.progress=(this.currentTime-t.timings.start)/t.timings.totalDuration,t.started&&!t.completed&&(t.options.onUpdate&&t.options.onUpdate(),t.moments.forEach((e,i)=>{let n=Math.max(this.currentTime-t.timings.start-t.timings.stagger*i,0),r=Math.min(n/t.timings.duration,1),a=t.timings.easing(r);e.update(a),t.options.toggle&&r!==1&&e.update(0)})),t.progress>0?(t.started||(t.options.onStart&&t.options.onStart(),t.timings.start!==0&&t.direction!=="from"&&t.moments.forEach(e=>{e.setProperties()})),t.started=!0):(t.started&&(t.direction==="from"||t.direction==="fromTo")?t.direction==="from"?t.timings.start!==0?t.moments.forEach(e=>{e.update(1)}):t.moments.forEach(e=>{e.update(0)}):t.moments.forEach(e=>{e.update(0)}):!t.started&&!t.initialized&&(t.direction==="from"||t.direction==="fromTo")&&(t.moments.forEach(e=>{e.update(0)}),t.initialized=!0),t.options.toggle&&t.moments.forEach(e=>{e.update(0)}),t.started=!1),t.progress>=1?(t.completed||(t.moments.forEach(e=>{e.update(1)}),t.options.onComplete&&t.options.onComplete()),t.completed=!0):t.completed=!1})}to(t,s,e,i=null){let n=!1,r=t;(t instanceof window.HTMLElement||t instanceof window.NodeList||t instanceof window.SVGPathElement||t instanceof window.SVGElement||t instanceof window.SVGCircleElement)&&(n=!0,t instanceof window.NodeList&&(r=[...t]));let a=this._setTargets(r),o=this._setTimings(a,e,i),h=[];a.forEach(l=>{h.push(new u(l,s,"to",n))}),this._add(h,o,e,"to")}from(t,s,e,i=null){let n=!1,r=t;(t instanceof window.HTMLElement||t instanceof window.NodeList||t instanceof window.SVGPathElement||t instanceof window.SVGElement||t instanceof window.SVGCircleElement)&&(n=!0,t instanceof window.NodeList&&(r=[...t]));let a=this._setTargets(r),o=this._setTimings(a,e,i),h=[];a.forEach(l=>{h.push(new u(l,s,"from",n))}),this._add(h,o,e,"from")}fromTo(t,s,e,i=null){let n=!1,r=t;(t instanceof window.HTMLElement||t instanceof window.NodeList||t instanceof window.SVGPathElement||t instanceof window.SVGElement||t instanceof window.SVGCircleElement)&&(n=!0,t instanceof window.NodeList&&(r=[...t]));let a=this._setTargets(r),o=this._setTimings(a,e,i),h=[];a.forEach(l=>{h.push(new u(l,s,"fromTo",n))}),this._add(h,o,e,"fromTo")}addClass(t,s,e,i=null){let n=!1,r=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(n=!0,t instanceof window.NodeList&&(r=[...t]));let a=this._setTargets(r),o=this._setTimings(a,e,i),h=[];a.forEach(l=>{h.push(new u(l,s,"addClass",n))}),this._add(h,o,e,"addClass")}removeClass(t,s,e,i=null){let n=!1,r=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(n=!0,t instanceof window.NodeList&&(r=[...t]));let a=this._setTargets(r),o=this._setTimings(a,e,i),h=[];a.forEach(l=>{h.push(new u(l,s,"removeClass",n))}),this._add(h,o,e,"removeClass")}onStart(t){this.onStartCallback=t}_add(t,s,e,i){this.actions.push({moments:t,timings:s,options:e,direction:i,progress:0,initialized:!1,started:!1,completed:!1}),this.setProgress(0)}_setTargets(t){let s=null;return Array.isArray(t)?s=t:s=[t],s}_setTimings(t,s,e){let i={},n=s.duration?s.duration*this.timeScale:1,r=0;e!==null?r=e*this.timeScale:r=this.duration,i.stagger=s.stagger?s.stagger*this.timeScale:0;let a=s.delay?s.delay*this.timeScale+r:r,o=n+(t.length-1)*i.stagger;return i.start=a,i.end=a+o,i.duration=n,i.totalDuration=o,i.easing=p.get(s.ease),this.previousActionDuration=i.end,this.duration=Math.max(this.previousActionDuration,this.duration),i}};var M=class{constructor(t,s,e={}){this.element=t,this.scene=s,this.options=e,this.init()}init(){this.observer=null,this.progress=0,this.scrollDistance=0,this.scrollPosition=0,this.element.parentElement.style.height="auto",this.viewportHeight=window.innerHeight,this.isIntersecting=!1,this.options.pinned?(this.offset=this.element.parentElement.offsetTop,this.offset+=this.options.beginOnIntersection?-this.element.parentElement.offsetHeight:0,this.scrollHeight=this.scene.duration,this._setScrollHeight(),this.scrollHeight+=this.options.offset?this.options.offset:0):(this.offset=this.element.getBoundingClientRect().top-this.viewportHeight,this.scrollHeight=this.viewportHeight+this.element.offsetHeight),this._scrollListener=this._scrollListener.bind(this),this._createObserver()}resize(){this.viewportHeight=window.innerHeight,this._setScrollHeight()}setScene(t){this.scene=t,this.init()}_setScrollHeight(){let t=this.scrollHeight+(this.options.beginOnIntersection?0:this.viewportHeight);this.element.parentElement.style.height=`${t/this.viewportHeight*100}vh`}_scrollListener(t){this.scrollDistance=t.target.scrollingElement.scrollTop,this.scrollPosition=this.scrollDistance-this.offset,this.progress=Math.min(Math.max(this.scrollPosition/this.scrollHeight,0),1)}_createObserver(){this.observer=new IntersectionObserver(t=>{t.forEach(s=>{s.isIntersecting?(this.isIntersecting=!0,window.addEventListener("scroll",this._scrollListener)):(this.isIntersecting=!1,window.removeEventListener("scroll",this._scrollListener),this.progress=Math.round(this.progress))})},{threshold:this.options.threshold?this.options.threshold:0}),this.observer.observe(this.element)}};var w=class{static to(t,s,e){let i=!1,n=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(i=!0,t instanceof window.NodeList&&(n=[...t]));let r=this._setTargets(n),a=this._setTimings(r,e),o=[];r.forEach(h=>{o.push(new u(h,s,"to",i))}),this._animate(o,a,e)}static from(t,s,e){let i=!1,n=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(i=!0,t instanceof window.NodeList&&(n=[...t]));let r=this._setTargets(n),a=this._setTimings(r,e),o=[];r.forEach(h=>{o.push(new u(h,s,"from",i))}),this._animate(o,a,e)}static fromTo(t,s,e){let i=!1,n=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(i=!0,t instanceof window.NodeList&&(n=[...t]));let r=this._setTargets(n),a=this._setTimings(r,e),o=[];r.forEach(h=>{o.push(new u(h,s,"fromTo",i))}),this._animate(o,a,e)}static addClass(t,s,e){let i=!1,n=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(i=!0,t instanceof window.NodeList&&(n=[...t]));let r=this._setTargets(n),a=this._setTimings(r,e),o=[];r.forEach(h=>{o.push(new u(h,s,"addClass",i))}),this._animate(o,a,e)}static removeClass(t,s,e){let i=!1,n=t;(t instanceof window.HTMLElement||t instanceof window.NodeList)&&(i=!0,t instanceof window.NodeList&&(n=[...t]));let r=this._setTargets(n),a=this._setTimings(r,e),o=[];r.forEach(h=>{o.push(new u(h,s,"removeClass",i))}),this._animate(o,a,e)}static _animate(t,s,e){function i(r){let a=r-n-s.delay,o=Math.min(a/s.totalDuration,1);t.forEach((h,l)=>{let d=Math.min((a-s.stagger*l)/s.duration,1);if(d>0){let g=s.easing(d);h.update(g)}}),o<1?(e.onUpdate&&e.onUpdate(),requestAnimationFrame(i)):(t.forEach(h=>{h.update(1)}),e.onComplete&&e.onComplete())}e.onStart&&e.onStart();let n=performance.now();requestAnimationFrame(i)}static _setTargets(t){let s=null;return Array.isArray(t)?s=t:s=[t],s}static _setTimings(t,s){let e=1e3,i={};return i.duration=s.duration?s.duration*e:1,i.delay=s.delay?s.delay*e:0,i.stagger=s.stagger?s.stagger*e:0,i.totalDuration=i.duration+(t.length-1)*i.stagger,i.easing=p.get(s.ease),i}};w.Scene=_;w.Camera=M;0&&(module.exports={});
